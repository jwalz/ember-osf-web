<div
    class='row'
    data-analytics-scope='Registries search results'
    ...attributes
>
    <div class={{if @result.openResourceTypes 'col-xs-10 col-sm-9' 'col-xs-12'}}>
        <h3 local-class='RegistriesSearchResult__Title'>
            <OsfLink
                data-test-result-title-id={{@result.id}}
                @href={{@result.mainLink}}
                data-analytics-name='Result Title{{if @provider (concat ' ' @provider.name)}}'
            >
                {{math @result.title}}
            </OsfLink>

            {{#if @result.withdrawn}}
                <span class='label label-default'>{{t 'registries.discover.search_result.withdrawn'}}</span>
            {{/if}}
        </h3>

        <ul local-class='Contributors'>
            {{#each this.contributors as |contrib|}}
                <li>
                    {{#if contrib.link}}
                        <OsfLink
                            @href={{contrib.link}}
                            data-analytics-name='Contributor Link'
                        >
                            {{contrib.name}}
                        </OsfLink>
                    {{else}}
                        {{contrib.name}}
                    {{/if}}
                </li>
            {{/each}}
        </ul>

        {{#if @result.dateUpdated}}
            <div class='m-t-sm'>
                <em>
                    {{t 'registries.discover.search_result.last_edited' date=(moment-format (utc @result.dateUpdated) 'MMMM D, YYYY UTC')}}
                </em>
            </div>
        {{/if}}

        <div class='m-t-sm'>
            <span local-class='RegistriesSearchResult__Sources'>
                {{#each @result.sources as |source index|}}
                    {{if index '| '}}{{source}}
                {{/each}}

                {{#if @result.registrationType}}
                    | {{@result.registrationType}}
                {{/if}}
            </span>
        </div>

        <p local-class='Description' class='text-muted m-t-sm'>
            {{math @result.description}}
        </p>
    </div>
    {{#if @result.openResourceTypes}}
        <div class='col-xs-2 col-sm-3' local-class='OpenResourceTypes'>
            <OpenResourceTypesList
                @registration={{@result.id}}
                @hasData={{@result.openResourceTypes.data}}
                @hasMaterials={{@result.openResourceTypes.materials}}
                @hasAnalyticCode={{@result.openResourceTypes.analytic_code}}
                @hasPapers={{@result.openResourceTypes.papers}}
                @hasSupplements={{@result.openResourceTypes.supplements}}
            />
        </div>
    {{/if}}
</div>
